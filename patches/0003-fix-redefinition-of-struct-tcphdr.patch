From 7f75b94bb53d8051bedfc1a0fcaaef7547f2d74b Mon Sep 17 00:00:00 2001
From: rofl0r <retnyg@gmx.net>
Date: Tue, 3 Jun 2014 13:54:36 +0200
Subject: [PATCH] fix redefinition of struct tcphdr

---
 generic/include/linux/tcp.h | 10 ++++++++++
 1 file changed, 10 insertions(+)

diff --git a/generic/include/linux/tcp.h b/generic/include/linux/tcp.h
index 1e9b4a6..acb4e2c 100644
--- a/generic/include/linux/tcp.h
+++ b/generic/include/linux/tcp.h
@@ -21,6 +21,15 @@
 #include <asm/byteorder.h>
 #include <linux/socket.h>
 
+#ifndef __UAPI_DEF_TCPHDR
+#ifdef _NETINET_TCP_H /* musl */
+#define __UAPI_DEF_TCPHDR 0
+#else
+#define __UAPI_DEF_TCPHDR 1
+#endif
+#endif
+
+#if __UAPI_DEF_TCPHDR
 struct tcphdr {
 	__be16	source;
 	__be16	dest;
@@ -55,6 +64,7 @@ struct tcphdr {
 	__sum16	check;
 	__be16	urg_ptr;
 };
+#endif
 
 /*
  *	The union cast uses a gcc extension to avoid aliasing problems
-- 
2.24.1

